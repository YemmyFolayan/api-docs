---
title: "Javascript Library"
mode: "wide"
description: "The Dojah platform has a smooth widget that enables your users to authorize access to their accounts. This widget works effortlessly across various browsers and devices of all sizes."
---

**How to Generate Widget**

Using the Dojah CDN-hosted Javascript client library, you can install the Dojah widget into your application by simply adding a script tag to your HTML document and insert basic configuration parameters.

**Step 1: Add the Client Javascript Library**

Add the script tag before the end of the closing body tag of your desired HTML page where you desire to give users the ability to authorize access to a financial institution.

```javascript javascript
<script src="https://widget.dojah.io/widget.js"></script>
```

> ## ❗️Adding the async attribute can cause the inline code to return undefined because the library may not be available at that moment. So avoid the use of async and defer for now.
> 
> Adding the async attribute can cause the inline code to return undefined because the library may not be available at that moment. So avoid the use of async and defer for now.

**Step 2: Configure the Javascript Client Library**

At this stage, you can now create a Dojah widget object by passing in your public key in javascript object representing your preferred configuration options.

```javascript javascript
const options = {
  app_id: app_id, //your app_id here
  p_key: p_key, //your production public key here
  type: 'custom',
  user_data: {
    first_name: {$first_name}, //optional
    last_name: {$last_name}, //optional
    dob: {$dob}, //YYYY-MM-DD Optional
    residence_country: 'NG', //optional
    email: {$email}//optional
  },
  
  metadata: {
    user_id: '12xxxxsxsxsxssx1',
  },
  
  config: {
    widget_id: ""  //this is generated from easyonboard here https://app.dojah.io/easy-onboard

  },
  onSuccess: function (response) {
    console.log('Success', response);
  },
  onError: function (err) {
    console.log('Error', err);
  },
  onClose: function () {
    console.log('Widget closed');
  }
};

const connect = new Connect(options);
const button = document.querySelector('#button-connect');
button.addEventListener('click', function () {
  connect.setup();
  connect.open();
});
```




| Parameter    | Type     | Description                                                                                                                                         |
|--------------|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| type         | string   | Widget Type: Values are **'custom', 'verification', 'identification', 'verification', 'liveness'**                                                   |
| app_id       | string   | Application Id, Get it from your dojah application dashboard [here](https://app.dojah.io/dashboard)                                                  |
| p_key        | string   | Public Key, Get it from your dojah application dashboard [here](https://app.dojah.io/apps)                                                           |
| reference_id | string   | Reference ID, It can be passed to keep track of the verification steps (Started, Ongoing, Successful). NB: reference_id character length must be greater than 10 |
| widget_id    | string   | Widget ID, Get it from your Easy Onboard application dashboard [here](https://app.dojah.io/easy-onboard)                                             |
| user_data    | object   | Automatically update the user data page, and thus skip the page |
| gov_data     | object   | Automatically update the government data page, and thus skip the page|
| metadata     | object   | Your application's metadata to be passed back to you via webhook, onSuccess, or onError                                                              |
| onSuccess    | function | This is called when your user has successfully completed enrollment with their preferred institution. **The sample response data below is passed to the widget**  |
| onError      | function | This is called when your user was unable to successfully complete enrollment.                                                                        |
| onClose      | function | This is called when the widget is closed.  |                                                                                                          |




## Typescript implementation

If you want to use typescript on some classes that are not available now or in the future, you could look at extending the global 'window' interface. You can follow below steps to guide you:
With typescript, you need to extend the global Window interface with additional properties.
Create a new folder "types"
Add a file "index.d.ts"
Put below code inside your "index.d.ts" file

```typescript typescript
export { };
declare global {
    interface Window {
        Connect: any;
	//add more properties you would like to extend
    }
}
```


set your compilerOptions "typeRoots" property to path of your type folder
E.g ["./src/types"]
Use the extended window property anywhere like this:

```typescript typescript
const connect = new window.Connect(options);

```

**Step 3: Handle a Successful Verification**

On successful enrollment, the onSuccess callback function that you supplied is called by the client library. We then return the connected account code to your server.

Kindly use the overall status (**response.status** (Boolean, i.e true or false)) to ascertain if the request failed or succeeded.

> ## 📘 Webhook Notifications
> 
> Webhook Notifications
> 
> You can receive the same data below (also passed to onSuccess and onError) via a webhook call.
> 
> Register your url for webhook calls [here](https://api-docs.dojah.io/docs/subscribe-to-services) and ensure `kyc.widget` is the `service` you are subscribed to.
> 
> In Config object Kindly set **webhook** object value to true (Boolean)
> 
> Example : **webhook : true**

**The Sample response data after successful verification**

```json Response
{
    metadata: {
        ipinfo: {
            status: "success",
            country: "United States",
            regionName: "Texas",
            city: "Dallas",
            district: "",
            zip: "75247",
            lat: 32.8137,
            lon: -96.8704,
            timezone: "America/Chicago",
            isp: "QuadraNet Enterprises LLC",
            org: "QuadraNet, Inc",
            as: "AS8100 QuadraNet Enterprises LLC",
            mobile: false,
            proxy: true,
            hosting: true,
            query: "155.94.251.121"
        },
        device_info: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36"
    },
    data: {
        index: {
            data: {},
            message: "Successfully continued to the main checks.",
            status: true
        },
        countries: {
            data: {
                country: "Nigeria"
            },
            message: "Successfully continued to the next step.",
            status: true
        },
        email: {
            data: {
                email: "michael@gmail.com"
            },
            status: true,
            message: "michael@gmail.com validation Successful"
        },
        user-data: {
            data: {
                firstName: "Michael",
                lastName: "Folayan",
                dob: "1998-05-16"
            },
            message: "",
            status: true
        },
        phone-number: {
            data: {
                phone: "+2348103817187"
            },
            message: "+2348103817187 validation Successful",
            status: true
        },
        selfie: {
            data: {
                selfieUrl: "https://dojah-kyc.s3.us-east-2.amazonaws.com/sandbox_kyc_image.png"
            },
            message: "Successfully validated your liveness",
            status: true
        },
        government-data: {
            data: {
                entity: {
                    title: "",
                    nationality: "",
                    bvn: "22300230659",
                    first_name: "VERONICA",
                    middle_name: "",
                    last_name: "ASAR",
                    date_of_birth: "22-Apr-1980",
                    phone_number1: "08011111111",
                    phone_number2: "",
                    gender: "Female",
                    enrollment_bank: "",
                    enrollment_branch: "",
                    email: "",
                    lga_of_origin: "",
                    lga_of_residence: "",
                    marital_status: "",
                    nin: "",
                    name_on_card: "",
                    residential_address: "",
                    state_of_origin: "",
                    state_of_residence: "",
                    watch_listed: "",
                    level_of_account: "",
                    registration_date: "",
                    customer: "6bb82c41-e15e-4308-b99d-e9640818eca9",
                    image_url: "https://dojah-kyc.s3-us-east-2.amazonaws.com/John_Doe_1688377760081373.jpg"
                },
                message: "",
                status: true
            }
        },
        id: {
            data: {
                idUrl: "https://dojah-files.s3.us-east-2.amazonaws.com/sandbox_verification_placeholder.png",
                backUrl: "https://dojah-files.s3.us-east-2.amazonaws.com/sandbox_verification_placeholder.png",
                idData: {
                    first_name: "John",
                    last_name: "Doe",
                    middle_name: "",
                    nationality: "Nigerian",
                    mrz_status: "",
                    expiry_date: "2020-01-01",
                    document_type: "National ID",
                    document_number: "123456789",
                    date_of_birth: "1990-01-01",
                    date_issued: "2019-01-01",
                    extras: ""
                }
            },
            status: true,
            message: "Successfully verified your id"
        },
        business-data: {
            business_name: null,
            business_number: null,
            business_type: "BN",
            registration_date: null,
            business_address: null
        },
        business-id: {
            business_name: "ABC Company LIMITED",
            business_type: "Business",
            business_number: "1237654",
            business_address: "",
            registration_date: "",
            image_url: "https://dojah-kyc.s3.us-east-2.amazonaws.com/sandbox_kyc_image.png"
        },
        address: {
            message: "Successfully verified your address",
            status: true,
            data: {
                location: {
                    userLocation: {
                        latitude: "6.6013817",
                        longitude: "3.2806906",
                        name: "31 Road, Round About, Gowon Estate Alimosho, 100001, Lagos, Nigeria"
                    },
                    addressLocation: {
                        latitude: "6.5765376",
                        longitude: "3.3292288"
                    }
                }
            }
        },
        additional-document: [
            {
                document_type: "image",
                document_url: "https://dojah-images.s3.amazonaws.com/652900d3f3a8a1003fdd5b71374eb32a-689d-4185-8921-78f524cd7eae.jpeg"
            }
        ]
    },
    businessData: {
        business_name: null,
        business_number: null,
        business_type: "BN",
        registration_date: null,
        business_address: null
    },
    businessId: {
        business_name: "ABC Company LIMITED",
        business_type: "Business",
        business_number: "1237654",
        business_address: "",
        registration_date: "",
        image_url: "https://dojah-kyc.s3.us-east-2.amazonaws.com/sandbox_kyc_image.png"
    },
    governmentData: {
        title: "",
        nationality: "",
        bvn: "22300230659",
        first_name: "VERONICA",
        middle_name: "",
        last_name: "ASAR",
        date_of_birth: "22-Apr-1980",
        phone_number1: "08011111111",
        phone_number2: "",
        gender: "Female",
        enrollment_bank: "",
        enrollment_branch: "",
        email: "",
        lga_of_origin: "",
        lga_of_residence: "",
        marital_status: "",
        nin: "",
        name_on_card: "",
        residential_address: "",
        state_of_origin: "",
        state_of_residence: "",
        watch_listed: "",
        level_of_account: "",
        registration_date: "",
        customer: "6bb82c41-e15e-4308-b99d-e9640818eca9",
        image_url: "https://dojah-kyc.s3-us-east-2.amazonaws.com/John_Doe_1688377760081373.jpg"
    },
    userDetails: {
        title: "",
        nationality: "",
        bvn: "22300230659",
        first_name: "VERONICA",
        middle_name: "",
        last_name: "ASAR",
        date_of_birth: "22-Apr-1980",
        phone_number1: "08011111111",
        phone_number2: "",
        gender: "Female",
        enrollment_bank: "",
        enrollment_branch: "",
        email: "",
        lga_of_origin: "",
        lga_of_residence: "",
        marital_status: "",
        nin: "",
        name_on_card: "",
        residential_address: "",
        state_of_origin: "",
        state_of_residence: "",
        watch_listed: "",
        level_of_account: "",
        registration_date: "",
        customer: "6bb82c41-e15e-4308-b99d-e9640818eca9",
        image_url: "https://dojah-kyc.s3-us-east-2.amazonaws.com/John_Doe_1688377760081373.jpg"
    },
    idType: "BVN",
    value: "1234",
    additionalDocument: [
        {
            document_type: "image",
            document_url: "https://dojah-images.s3.amazonaws.com/652900d3f3a8a1003fdd5b71374eb32a-689d-4185-8921-78f524cd7eae.jpeg"
        }
    ],
    idData: {
        first_name: "John",
        last_name: "Doe",
        middle_name: "",
        nationality: "Nigerian",
        mrz_status: "",
        expiry_date: "2020-01-01",
        document_type: "National ID",
        document_number: "123456789",
        date_of_birth: "1990-01-01",
        date_issued: "2019-01-01",
        extras: ""
    },
    idUrl: "https://dojah-files.s3.us-east-2.amazonaws.com/sandbox_verification_placeholder.png",
    backUrl: "https://dojah-files.s3.us-east-2.amazonaws.com/sandbox_verification_placeholder.png",
    message: "Successfully completed the verification.",
    referenceId: "DJ-94D5A85B12",
    verificationMode: "LIVENESS",
    verificationType: "RC-NUMBER",
    verificationValue: "1234",
    verificationUrl: "https://app.dojah.io/verifications/bio-data/DJ-94D5A85B12",
    selfieUrl: "https://dojah-kyc.s3.us-east-2.amazonaws.com/sandbox_kyc_image.png",
    status: true,
    aml: {
        status: false
    },
    verificationStatus: "Completed"
}
```